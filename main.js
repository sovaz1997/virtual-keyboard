!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(3),n(1),e.exports=n(2)},function(e,t){e.exports='<!doctype html> <html lang=en> <head> <meta charset=UTF-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>Virtual Keyboard</title> </head> <body> </body> </html>'},function(e,t,n){},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.symbols=[],this.tabLength=4,this.createElement(),this.render()}var t,n,i;return t=e,(n=[{key:"createElement",value:function(){this.el=document.createElement("textarea"),this.el.classList.add("textarea")}},{key:"render",value:function(){this.el.textContent=this.symbols.join("")}},{key:"addLetter",value:function(e){this.symbols.push(e),this.render()}},{key:"backSpace",value:function(){this.symbols.pop(),this.render()}},{key:"element",get:function(){return this.el}}])&&a(t.prototype,n),i&&a(t,i),e}();function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n,a,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyState=a,this.isLetter=n,this.simpleKey="string"==typeof a,this.lang=t,this.upperCase=!1,this.pressed=!1,this.downCb=i,this.upCb=r,this.createElement(),this.addClickEvents(),this.render()}var t,n,a;return t=e,(n=[{key:"createElement",value:function(){this.el=document.createElement("button"),this.el.classList=["key"]}},{key:"setUpperCase",value:function(e,t){var n=e;this.isLetter&&t&&(n=!n),this.upperCase=n,this.render()}},{key:"render",value:function(){this.el.classList.toggle("key--down",this.pressed),this.el.innerText=this.text}},{key:"setLang",value:function(e){this.lang=e,this.render()}},{key:"down",value:function(){this.pressed||(this.pressed=!0,this.render(),void 0!==this.downCb&&this.downCb(this.text))}},{key:"up",value:function(){this.pressed&&(this.pressed=!1,this.render(),void 0!==this.upCb&&this.upCb(this.text))}},{key:"addClickEvents",value:function(){var e=this;this.el.addEventListener("mousedown",(function(t){t.preventDefault(),e.down(),document.addEventListener("mouseup",(function(t){t.preventDefault(),e.up(),document.removeEventListener("mouseup",e)}))}))}},{key:"addModifiers",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(e=this.el.classList).add.apply(e,r(n.map((function(e){return"key--".concat(e)}))))}},{key:"element",get:function(){return this.el}},{key:"text",get:function(){return this.simpleKey?this.keyState:this.keyState[this.lang][+this.upperCase]}}])&&d(t.prototype,n),a&&d(t,a),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=new i,this.langList=["en","ru"],this.currentLang=0,this.setDefaultControlKeyState(),this.keys=[],this.keyMap={},this.selector=document.querySelector(t),this.buildKeyBoard(),this.addEventListeners()}var t,n,a;return t=e,a=[{key:"createRow",value:function(){var e=document.createElement("div");return e.className="row",e}}],(n=[{key:"buildKeyBoard",value:function(){var e=document.createElement("div");e.classList.add("keyboard"),e.append(this.text.element);var t=document.createElement("div");t.classList.add("keys"),this.createKeys(t),e.append(t),this.selector.append(e)}},{key:"addEventListeners",value:function(){var e=this;document.addEventListener("keydown",(function(t){t.preventDefault();var n=e.keyMap[t.code];void 0!==n&&(n.down(),t.repeat&&!n.simpleKey&&n.up())})),document.addEventListener("keyup",(function(t){t.preventDefault();var n=e.keyMap[t.code];void 0!==n&&n.up()}))}},{key:"nextLang",value:function(){var e=this;this.currentLang+=1,this.currentLang%=this.langList.length,this.keys.forEach((function(t){t.setLang(e.getLang())}))}},{key:"getLang",value:function(){return this.langList[this.currentLang]}},{key:"bindKey",value:function(e,t){this.keyMap[e]=t,this.keys.push(t)}},{key:"appendKey",value:function(e,t){return this.bindKey(e,t),t.element}},{key:"updateKeyboardState",value:function(){var e=this;this.controlState.Shift&&this.controlState.Alt?this.nextLang():(this.controlState.CapsLock?this.capsLockOn=!0:this.capsLockOn=!1,this.keys.forEach((function(t){t.setUpperCase(!!e.controlState.Shift,!!e.controlState.CapsLock)})))}},{key:"updateControlKeyState",value:function(e,t){t?this.controlState[e]+=1:this.controlState[e]-=1,this.updateKeyboardState()}},{key:"toggleControlState",value:function(e){this.controlState[e]=!this.controlState[e],this.updateKeyboardState()}},{key:"setDefaultControlKeyState",value:function(){this.controlState={Ctrl:0,CapsLock:0,Alt:0,Shift:0,Meta:0}}},{key:"createKeys",value:function(e){e.append(this.createRow1()),e.append(this.createRow2()),e.append(this.createRow3()),e.append(this.createRow4()),e.append(this.createRow5()),this.styleKeys()}},{key:"styleKeys",value:function(){this.keyMap.Space.addModifiers("space"),this.keyMap.ShiftLeft.addModifiers("shift-left","left"),this.keyMap.ShiftRight.addModifiers("shift-right","right"),this.keyMap.Enter.addModifiers("enter","right"),this.keyMap.Tab.addModifiers("tab","left"),this.keyMap.CapsLock.addModifiers("caps-lock","left"),this.keyMap.ControlLeft.addModifiers("left"),this.keyMap.ControlRight.addModifiers("right"),this.keyMap.Delete.addModifiers("right"),this.keyMap.Backspace.addModifiers("right")}},{key:"createRow1",value:function(){var t=this,n=e.createRow();return n.append(this.appendKey("Backquote",new p(this.getLang(),!1,{en:["`","~"],ru:["ё","Ё"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit1",new p(this.getLang(),!1,{en:["1","!"],ru:["1","!"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit2",new p(this.getLang(),!1,{en:["2","@"],ru:["2",'"']},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit3",new p(this.getLang(),!1,{en:["3","#"],ru:["3","№"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit4",new p(this.getLang(),!1,{en:["4",";"],ru:["4","$"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit5",new p(this.getLang(),!1,{en:["5","%"],ru:["5","%"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit6",new p(this.getLang(),!1,{en:["6","^"],ru:["6",":"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit7",new p(this.getLang(),!1,{en:["7","&"],ru:["7","?"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit8",new p(this.getLang(),!1,{en:["8","*"],ru:["8","*"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit9",new p(this.getLang(),!1,{en:["9","("],ru:["9","("]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Digit0",new p(this.getLang(),!1,{en:["0",")"],ru:["0",")"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Minus",new p(this.getLang(),!1,{en:["-","_"],ru:["-","_"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Equal",new p(this.getLang(),!1,{en:["=","+"],ru:["=","+"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Backspace",new p(this.getLang(),!1,{en:["Backspace","Backspace"],ru:["Backspace","Backspace"]},(function(){t.text.backSpace()})))),n}},{key:"createRow2",value:function(){var t=this,n=e.createRow();return n.append(this.appendKey("Tab",new p(this.getLang(),!1,{en:["Tab","Tab"],ru:["Tab","Tab"]},(function(){t.text.addLetter("\t")})))),n.append(this.appendKey("KeyQ",new p(this.getLang(),!0,{en:["q","Q"],ru:["й","Й"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyW",new p(this.getLang(),!0,{en:["w","W"],ru:["ц","Ц"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyE",new p(this.getLang(),!0,{en:["e","E"],ru:["у","У"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyR",new p(this.getLang(),!0,{en:["r","R"],ru:["к","К"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyT",new p(this.getLang(),!0,{en:["t","T"],ru:["е","Е"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyY",new p(this.getLang(),!0,{en:["y","Y"],ru:["н","Н"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyU",new p(this.getLang(),!0,{en:["u","U"],ru:["г","Г"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyI",new p(this.getLang(),!0,{en:["i","I"],ru:["ш","Ш"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyO",new p(this.getLang(),!0,{en:["o","O"],ru:["щ","Щ"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyP",new p(this.getLang(),!0,{en:["p","P"],ru:["з","З"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("BracketLeft",new p(this.getLang(),!1,{en:["[","{"],ru:["х","Х"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("BracketRight",new p(this.getLang(),!1,{en:["]","}"],ru:["ъ","Ъ"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Delete",new p(this.getLang(),!1,{en:["Del","Del"],ru:["Del","Del"]}))),n}},{key:"createRow3",value:function(){var t=this,n=e.createRow();return n.append(this.appendKey("CapsLock",new p(this.getLang(),!1,"Caps Lock",(function(){t.toggleControlState("CapsLock",!0)})))),n.append(this.appendKey("KeyA",new p(this.getLang(),!0,{en:["a","A"],ru:["ф","Ф"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyS",new p(this.getLang(),!0,{en:["s","S"],ru:["ы","Ы"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyD",new p(this.getLang(),!0,{en:["d","D"],ru:["в","В"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyF",new p(this.getLang(),!0,{en:["f","F"],ru:["а","А"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyG",new p(this.getLang(),!0,{en:["g","G"],ru:["п","П"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyH",new p(this.getLang(),!0,{en:["h","H"],ru:["р","Р"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyJ",new p(this.getLang(),!0,{en:["j","J"],ru:["о","О"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyK",new p(this.getLang(),!0,{en:["k","K"],ru:["л","Л"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyL",new p(this.getLang(),!0,{en:["l","L"],ru:["д","Д"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Semicolon",new p(this.getLang(),!1,{en:[";",":"],ru:["ж","Ж"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Quote",new p(this.getLang(),!1,{en:["'",'"'],ru:["э","Э"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Backslash",new p(this.getLang(),!1,{en:["\\","|"],ru:["\\","/"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Enter",new p(this.getLang(),!1,{en:["Enter","Enter"],ru:["Enter","Enter"]},(function(){t.text.addLetter("\n")})))),n}},{key:"createRow4",value:function(){var t=this,n=e.createRow();return n.append(this.appendKey("ShiftLeft",new p(this.getLang(),!1,"Shift",(function(){t.updateControlKeyState("Shift",!0)}),(function(){t.updateControlKeyState("Shift",!1)})))),n.append(this.appendKey("IntlBackslash",new p(this.getLang(),!1,{en:["\\","|"],ru:["\\","/"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyZ",new p(this.getLang(),!0,{en:["z","Z"],ru:["я","Я"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyX",new p(this.getLang(),!0,{en:["x","X"],ru:["ч","Ч"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyC",new p(this.getLang(),!0,{en:["c","C"],ru:["с","С"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyV",new p(this.getLang(),!0,{en:["v","V"],ru:["м","М"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyB",new p(this.getLang(),!0,{en:["b","B"],ru:["и","И"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyN",new p(this.getLang(),!0,{en:["n","N"],ru:["т","Т"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("KeyM",new p(this.getLang(),!0,{en:["m","M"],ru:["ь","Ь"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Comma",new p(this.getLang(),!1,{en:[",","<"],ru:["б","Б"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Period",new p(this.getLang(),!1,{en:[".",">"],ru:["ю","Ю"]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("Slash",new p(this.getLang(),!1,{en:["/","?"],ru:[".",","]},(function(e){t.text.addLetter(e)})))),n.append(this.appendKey("ShiftRight",new p(this.getLang(),!1,{en:["Shift","Shift"],ru:["Shift","Shift"]},(function(){t.updateControlKeyState("Shift",!0)}),(function(){t.updateControlKeyState("Shift",!1)})))),n}},{key:"createRow5",value:function(){var t=this,n=e.createRow();return n.append(this.appendKey("ControlLeft",new p(this.getLang(),!1,"Ctrl",(function(){t.updateControlKeyState("Ctrl",!0)}),(function(){t.updateControlKeyState("Ctrl",!1)})))),n.append(this.appendKey("MetaLeft",new p(this.getLang(),!1,"Win",(function(){t.updateControlKeyState("Meta",!0)}),(function(){t.updateControlKeyState("Meta",!1)})))),n.append(this.appendKey("AltLeft",new p(this.getLang(),!1,"Alt",(function(){t.updateControlKeyState("Alt",!0)}),(function(){t.updateControlKeyState("Alt",!1)})))),n.append(this.appendKey("Space",new p(this.getLang(),!1,{en:["Space","Space"],ru:["Space","Space"]},(function(){t.text.addLetter(" ")})))),n.append(this.appendKey("AltRight",new p(this.getLang(),!1,"Alt",(function(){t.updateControlKeyState("Alt",!0)}),(function(){t.updateControlKeyState("Alt",!1)})))),n.append(this.appendKey("ControlRight",new p(this.getLang(),!1,"Ctrl",(function(){t.updateControlKeyState("Ctrl",!0)}),(function(){t.updateControlKeyState("Ctrl",!1)})))),n}}])&&o(t.prototype,n),a&&o(t,a),e}();window.onload=function(){new u("body")}}]);